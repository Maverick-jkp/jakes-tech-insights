# GitHub Workflows Setup Guide

GitHub OAuth ì•±ì€ workflow íŒŒì¼ì„ í‘¸ì‹œí•  ê¶Œí•œì´ ì—†ì–´ì„œ, GitHub ì›¹ì‚¬ì´íŠ¸ì—ì„œ ì§ì ‘ ìƒì„±í•´ì•¼ í•©ë‹ˆë‹¤.

## ğŸš€ Quick Setup (5ë¶„)

### Step 1: API Key Secret ì„¤ì •

1. GitHub ë¦¬í¬ì§€í† ë¦¬ë¡œ ì´ë™: https://github.com/Maverick-jkp/jakes-tech-insights
2. **Settings** â†’ **Secrets and variables** â†’ **Actions** í´ë¦­
3. **New repository secret** í´ë¦­
4. ë‹¤ìŒ ì…ë ¥:
   - **Name**: `ANTHROPIC_API_KEY`
   - **Secret**: íšŒì‚¬ Claude API í‚¤ ì…ë ¥
5. **Add secret** í´ë¦­

### Step 2: Daily Content Workflow ìƒì„±

1. GitHub ë¦¬í¬ì§€í† ë¦¬ì˜ **Actions** íƒ­ í´ë¦­
2. **New workflow** í´ë¦­
3. **set up a workflow yourself** í´ë¦­
4. íŒŒì¼ ì´ë¦„ì„ `daily-content.yml`ë¡œ ë³€ê²½
5. ì•„ë˜ ë‚´ìš© ì „ì²´ ë³µì‚¬í•´ì„œ ë¶™ì—¬ë„£ê¸°:

```yaml
name: Daily Content Generation

on:
  schedule:
    # Run every day at 9 AM UTC (6 PM KST)
    - cron: '0 9 * * *'
  workflow_dispatch:
    inputs:
      count:
        description: 'Number of posts to generate'
        required: false
        default: '3'
      skip_review:
        description: 'Skip AI review step'
        required: false
        default: 'false'

jobs:
  generate-content:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'

      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install anthropic

      - name: Generate content
        env:
          ANTHROPIC_API_KEY: ${{ secrets.ANTHROPIC_API_KEY }}
        run: |
          COUNT="${{ github.event.inputs.count || '3' }}"
          python scripts/generate_posts.py --count "$COUNT"

      - name: Run quality gate
        id: quality_gate
        run: |
          python scripts/quality_gate.py
          echo "quality_gate_passed=$?" >> $GITHUB_OUTPUT

      - name: AI Review
        if: github.event.inputs.skip_review != 'true'
        env:
          ANTHROPIC_API_KEY: ${{ secrets.ANTHROPIC_API_KEY }}
        run: |
          python scripts/ai_reviewer.py

      - name: Upload quality reports
        uses: actions/upload-artifact@v4
        with:
          name: quality-reports
          path: |
            quality_report.json
            ai_review_report.json
            generated_files.json
          retention-days: 30

      - name: Create Pull Request
        if: success()
        uses: peter-evans/create-pull-request@v6
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          committer: GitHub Actions <noreply@github.com>
          author: Content Bot <noreply@github.com>
          commit-message: |
            ğŸ¤– Auto-generated content

            Generated ${{ github.event.inputs.count || '3' }} blog posts

            Quality Gate: âœ… PASSED
            AI Review: See artifacts for details
          branch: auto-content-${{ github.run_number }}
          delete-branch: true
          title: 'ğŸ¤– Daily Content: ${{ github.event.inputs.count || 3 }} new posts'
          body: |
            ## ğŸ¤– Automated Content Generation

            This PR contains AI-generated blog content that has passed quality checks.

            ### ğŸ“Š Generation Details
            - **Posts generated**: ${{ github.event.inputs.count || '3' }}
            - **Workflow run**: [${{ github.run_number }}](${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }})
            - **Quality gate**: âœ… PASSED

            ### ğŸ“‹ Quality Reports
            Download the artifacts from the workflow run to see:
            - `quality_report.json` - Detailed quality metrics
            - `ai_review_report.json` - AI self-review results
            - `generated_files.json` - List of generated files

            ### âœ… Checklist for Review
            - [ ] Review generated content for accuracy
            - [ ] Check AI review recommendations
            - [ ] Verify quality gate metrics
            - [ ] Test locally if needed

            ### ğŸš€ Next Steps
            1. Review the generated content
            2. Make any necessary edits
            3. Merge to trigger Cloudflare Pages deployment

            ---
            *Generated by GitHub Actions*
          labels: |
            automated
            content
            needs-review

      - name: Cleanup on failure
        if: failure()
        run: |
          # Clean up stuck topics if workflow fails
          python scripts/topic_queue.py cleanup 24

      - name: Notify on failure
        if: failure()
        run: |
          echo "::warning::Content generation workflow failed. Check logs and quality reports."
          echo "::warning::Stuck topics have been cleaned up and returned to queue."
```

6. **Commit changes** í´ë¦­ (ì»¤ë°‹ ë©”ì‹œì§€: `feat: Add daily content generation workflow`)

### Step 3: í…ŒìŠ¤íŠ¸ ì‹¤í–‰

1. **Actions** íƒ­ìœ¼ë¡œ ì´ë™
2. ì¢Œì¸¡ì—ì„œ **Daily Content Generation** ì„ íƒ
3. **Run workflow** ë“œë¡­ë‹¤ìš´ í´ë¦­
4. ì˜µì…˜ ì„¤ì •:
   - **Number of posts**: `1` (í…ŒìŠ¤íŠ¸ìš©)
   - **Skip AI review**: `false`
5. **Run workflow** ë²„íŠ¼ í´ë¦­

### Step 4: ê²°ê³¼ í™•ì¸

- Workflow ì‹¤í–‰ì´ ì™„ë£Œë˜ë©´ (ì•½ 3-5ë¶„)
- ìë™ìœ¼ë¡œ PRì´ ìƒì„±ë¨
- **Pull requests** íƒ­ì—ì„œ í™•ì¸
- Quality reportsëŠ” Artifactsì—ì„œ ë‹¤ìš´ë¡œë“œ ê°€ëŠ¥

## ğŸ“‹ Workflow ê¸°ëŠ¥

### ìë™ ì‹¤í–‰
- ë§¤ì¼ ì˜¤ì „ 9ì‹œ UTC (ì˜¤í›„ 6ì‹œ KST) ìë™ ì‹¤í–‰
- ê¸°ë³¸ê°’: 3ê°œ í¬ìŠ¤íŠ¸ ìƒì„±

### ìˆ˜ë™ ì‹¤í–‰
- Actions íƒ­ì—ì„œ ì–¸ì œë“  ìˆ˜ë™ ì‹¤í–‰ ê°€ëŠ¥
- í¬ìŠ¤íŠ¸ ê°œìˆ˜ ì»¤ìŠ¤í„°ë§ˆì´ì§• ê°€ëŠ¥
- AI ë¦¬ë·° ìŠ¤í‚µ ì˜µì…˜

### íŒŒì´í”„ë¼ì¸
```
1. í† í”½ íì—ì„œ ì˜ˆì•½
2. Claude APIë¡œ Draft ìƒì„±
3. Editor Agentê°€ ê²€í† 
4. Quality Gate í†µê³¼ í™•ì¸
5. AI Reviewer í‰ê°€
6. Reports ìƒì„±
7. PR ìë™ ìƒì„±
8. ì‹¤íŒ¨ ì‹œ ìë™ í´ë¦°ì—…
```

## âœ… ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] ANTHROPIC_API_KEY Secret ì„¤ì •
- [ ] daily-content.yml íŒŒì¼ ìƒì„±
- [ ] í…ŒìŠ¤íŠ¸ workflow ì‹¤í–‰ (1ê°œ í¬ìŠ¤íŠ¸)
- [ ] PR ìë™ ìƒì„± í™•ì¸
- [ ] Quality reports ë‹¤ìš´ë¡œë“œ ë° í™•ì¸
- [ ] ìƒì„±ëœ ì½˜í…ì¸  í’ˆì§ˆ ì²´í¬

## ğŸ”§ Troubleshooting

### Workflowê°€ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ” ê²½ìš°
- Actions íƒ­ì´ í™œì„±í™”ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
- Repository Settings â†’ Actions â†’ Generalì—ì„œ ê¶Œí•œ í™•ì¸

### API Key ì—ëŸ¬
- Secret ì´ë¦„ì´ ì •í™•íˆ `ANTHROPIC_API_KEY`ì¸ì§€ í™•ì¸
- API í‚¤ê°€ ìœ íš¨í•œì§€ í™•ì¸

### PR ìƒì„± ì‹¤íŒ¨
- `GITHUB_TOKEN` ê¶Œí•œ í™•ì¸
- Repository Settings â†’ Actions â†’ General â†’ Workflow permissions â†’ "Read and write permissions" ì²´í¬

## ğŸ“ ë‹¤ìŒ ë‹¨ê³„

Workflow ì„¤ì •ì´ ì™„ë£Œë˜ë©´:

1. **ë¡œì»¬ì—ì„œ í…ŒìŠ¤íŠ¸**:
   ```bash
   # Generate 1 post locally
   export ANTHROPIC_API_KEY='your-key'
   python scripts/generate_posts.py --count 1

   # Run quality gate
   python scripts/quality_gate.py

   # Run AI review
   python scripts/ai_reviewer.py
   ```

2. **Queue ê´€ë¦¬**:
   ```bash
   # View stats
   python scripts/topic_queue.py stats

   # Add new topics
   python scripts/topic_queue.py add "New keyword" tech en 8
   ```

3. **ì ì§„ì  í™•ëŒ€**:
   - Week 1: 1ê°œ/ì¼ (ìˆ˜ë™ ì²´í¬)
   - Week 2-4: 3ê°œ/ì¼
   - Month 2+: 9ê°œ/ì¼ (ìë™í™”)

---

**ì„¤ì • ì™„ë£Œ í›„ ì´ íŒŒì¼ì€ ì‚­ì œí•´ë„ ë©ë‹ˆë‹¤.**
